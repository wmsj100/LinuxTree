---
title: Boolean类型转换
date: 2016-04-28
tags: [布尔,JavaScript]
categories: Dynamic
---

# 布尔操作符

在一门编程语言中，布尔操作符的重要性堪比相等操作符。如果没有测试两个值关系的能力，那么诸如 if...else 和循环之类的语句就不会有用武之地了。布尔操作符一共有 3 个：非（NOT）、与（AND）
和或（OR）。

## 逻辑非

`！` --表示逻辑非，取反的意思，只有`0，null, undefined, false, "", NaN` 这些值取反值为--`true` 。

可以俩个逻辑非操作符`!!` 将一个值转换为与其对应的布尔值，效果和直接使用`Boolean()`进行求值是一样的。

## 逻辑与

`&&` --表示逻辑与，在使用逻辑与操作符时要始终铭记它是一个短路操作符。`if(a && b){ console.log(1)}` 如果a为`false` 就不会执行b，只有a为`true` ,才会去执行b。

## 逻辑或

`||` --表示逻辑或，也是短路操作符，如果a为`true` ，就不会去执行b，只有a为`false` ，才会去执行b。

```javascript
var found = true;
var result = (found || someUndefinedVariable); // 不会发生错误
alert(result); // 会执行（"true"）
```

我们可以利用逻辑或的这一行为来避免为变量赋 null 或 undefined 值。例如：
`var myObject = preferredObject || backupObject;` 
在这个例子中，变量 myObject 将被赋予等号后面两个值中的一个。变量 preferredObject 中包含优先赋给变量 myObject 的值，变量 backupObject 负责在 preferredObject 中不包含有效值的情况下提供后备值。如果 preferredObject 的值不是 null ，那么它的值将被赋给 myObject ；如果是 null ，则将 backupObject 的值赋给 myObject 。ECMAScript 程序的赋值语句经常会使用这种模式.

# 乘性操作符

ECMAScript 定义了 3 个乘性操作符：乘法、除法和求模。这些操作符与 Java、C 或者 Perl 中的相应操作符用途类似，只不过在操作数为非数值的情况下会执行自动的类型转换。如果参与乘性计算的某个操作数不是数值，后台会先使用 Number() 转型函数将其转换为数值。也就是说，空字符串将被当作0，布尔值 true 将被当作 1。

## 1. 乘法

乘法操作符由一个星号（ * ）表示，用于计算两个数值的乘积。其语法类似于 C，如下面的例子
所示：
`var result = 34 * 56;` 
在处理特殊值的情况下，乘法操作符遵循下列特殊的规则：

-  如果操作数都是数值，执行常规的乘法计算，即两个正数或两个负数相乘的结果还是正数，而如果只有一个操作数有符号，那么结果就是负数。如果乘积超过了 ECMAScript 数值的表示范围，则返回 Infinity 或 -Infinity ；

-  如果有一个操作数是 NaN ，则结果是 NaN ；
-  ​
-  如果是 Infinity 与 0 相乘，则结果是 NaN ；

-  如果是 Infinity 与非 0 数值相乘，则结果是 Infinity 或 -Infinity ，取决于有符号操作数的符号；

-  如果是 Infinity 与 Infinity 相乘，则结果是 Infinity ；

-  如果有一个操作数不是数值，则在后台调用 Number() 将其转换为数值，然后再应用上面的规则。

## 2.除法

与乘法操作符类似，除法操作符对特殊的值也有特殊的处理规则。这些规则如下：

- 如果操作数都是数值，执行常规的除法计算，即两个正数或两个负数相除的结果还是正数，而

如果只有一个操作数有符号，那么结果就是负数。如果商超过了 ECMAScript 数值的表示范围，
则返回 Infinity 或 -Infinity ；

- 如果有一个操作数是 NaN ，则结果是 NaN ；
- 如果是 Infinity 被 Infinity 除，则结果是 NaN ；
- 如果是零被零除，则结果是 NaN ；
- 如果是非零的有限数被零除，则结果是 Infinity 或 -Infinity ，取决于有符号操作数的符号；
- 如果是 Infinity 被任何非零数值除，则结果是 Infinity 或 -Infinity ，取决于有符号操作数的符号；
- 如果有一个操作数不是数值，则在后台调用 Number() 将其转换为数值，然后再应用上面的规则。


## 3. 求模

# 加性操作符

## 1.加法

如果两个操作符都是数值，执行常规的加法计算，然后根据下列规则返回结果：
  如果有一个操作数是 NaN ，则结果是 NaN ；
  如果是 Infinity 加 Infinity ，则结果是 Infinity ；
  如果是 -Infinity 加 -Infinity ，则结果是 -Infinity ；
  如果是 Infinity 加 -Infinity ，则结果是 NaN ；
  如果是+0 加+0，则结果是+0；
  如果是-0 加-0，则结果是-0；
  如果是+0 加-0，则结果是+0。
不过，如果有一个操作数是字符串，那么就要应用如下规则：
  如果两个操作数都是字符串，则将第二个操作数与第一个操作数拼接起来；
  如果只有一个操作数是字符串，则将另一个操作数转换为字符串，然后再将两个字符串拼接
起来。
如果有一个操作数是对象、数值或布尔值，则调用它们的 toString() 方法取得相应的字符串值，
然后再应用前面关于字符串的规则。对于 undefined 和 null ，则分别调用 String() 函数并取得字符
串 "undefined" 和 "null" 。

```javascript
var num1 = 5;
var num2 = 10;
var message = "The sum of 5 and 10 is " + num1 + num2;
alert(message); // "The sum of 5 and 10 is 510"
```

```javascript
var num1 = 5;
var num2 = 10;
var message = "The sum of 5 and 10 is " + (num1 + num2);
alert(message); //"The sum of 5 and 10 is 15"
```

## 2.减法

与加法操作符类似，ECMAScript 中的减法操作符在处理各种数据类型转换时，同样需要遵循一些
特殊规则，如下所示：
  如果两个操作符都是数值，则执行常规的算术减法操作并返回结果；
  如果有一个操作数是 NaN ，则结果是 NaN ；
  如果是 Infinity 减 Infinity ，则结果是 NaN ；
  如果是 -Infinity 减 -Infinity ，则结果是 NaN ；
  如果是 Infinity 减 -Infinity ，则结果是 Infinity ；
  如果是 -Infinity 减 Infinity ，则结果是 -Infinity ；
  如果是+0 减+0，则结果是+0；
  如果是+0 减-0，则结果是-0；
  如果是-0 减-0，则结果是+0；
  如果有一个操作数是字符串、布尔值、 null 或 undefined ，则先在后台调用 Number() 函数将其转换为数值，然后再根据前面的规则执行减法计算。如果转换的结果是 NaN ，则减法的结果就是 NaN ；
  如果有一个操作数是对象，则调用对象的 valueOf() 方法以取得表示该对象的数值。如果得到的值是 NaN ，则减法的结果就是 NaN 。如果对象没有 valueOf() 方法，则调用其 toString()
方法并将得到的字符串转换为数值。
```javascript
var result1 = 5 - true; // 4，因为 true 被转换成了 1
var result2 = NaN - 1; // NaN
var result3 = 5 - 3; // 2
var result4 = 5 - ""; // 5，因为"" 被转换成了 0
var result5 = 5 - "2"; // 3，因为"2"被转换成了 2
var result6 = 5 - null; // 5，因为 null 被转换成了 0
```
# 关系操作符

小于（<）、大于（>）、小于等于（<=）和大于等于（>=）这几个关系操作符用于对两个值进行比较，比较的规则与我们在数学课上所学的一样。这几个操作符都返回一个布尔值，

与 ECMAScript中的其他操作符一样，当关系操作符的操作数使用了非数值时，也要进行数据转换或完成某些奇怪的操作。以下就是相应的规则。
  如果两个操作数都是数值，则执行数值比较。
  如果两个操作数都是字符串，则比较两个字符串对应的字符编码值。
  如果一个操作数是数值，则将另一个操作数转换为一个数值，然后执行数值比较。
  如果一个操作数是对象，则调用这个对象的 valueOf() 方法，用得到的结果按照前面的规则执行比较。如果对象没有 valueOf() 方法，则调用 toString() 方法，并用得到的结果根据前面的规则执行比较。
  如果一个操作数是布尔值，则先将其转换为数值，然后再执行比较。

在使用关系操作符比较两个字符串时，会执行一种奇怪的操作。很多人都会认为，在比较字符串值时，小于的意思是“在字母表中的位置靠前”，而大于则意味着“在字母表中的位置靠后”，但实际上完全不是那么回事。在比较字符串时，实际比较的是两个字符串中对应位置的每个字符的字符编码值。经过这么一番比较之后，再返回一个布尔值。由于大写字母的字符编码全部小于小写字母的字符编码，因此我们就会看到如下所示的奇怪现象：

```javascript
var result = "Brick" < "alphabet"; //true
var result = "Brick".toLowerCase() < "alphabet".toLowerCase(); //false
var result = "23" < "3"; //true
var result = "23" < 3; //false
```

确实，当比较字符串 "23" 是否小于 "3" 时，结果居然是 true 。这是因为两个操作数都是字符串，而字符串比较的是字符编码（ "2" 的字符编码是 50，而 "3" 的字符编码是 51）。不过，如果像下面例子中一样，将一个操作数改为数值，比较的结果就正常了：

在比较数值和字符串时，字符串都会被转换成数值，然后再以数值方式与另一个数值比较。当然，这个规则对前面的例子是适用的。可是，如果那个字符串不能被转换成一个合理的数值呢？比如：

```javascript
var result = "a" < 3; // false，因为"a"被转换成了 NaN
```

由于字母 "a" 不能转换成合理的数值，因此就被转换成了 NaN 。根据规则，任何操作数与 NaN 进行关系比较，结果都是 false 。于是，就出现了下面这个有意思的现象：

```javascript
var result1 = NaN < 3; //false
var result2 = NaN >= 3; //false
```

按照常理，如果一个值不小于另一个值，则一定是大于或等于那个值。然而，在与 NaN 进行比较时，这两个比较操作的结果都返回了 false 。

# 相等操作符

确定两个变量是否相等是编程中的一个非常重要的操作。在比较字符串、数值和布尔值的相等性时，问题还比较简单。但在涉及到对象的比较时，问题就变得复杂了。最早的 ECMAScript 中的相等和不等操作符会在执行比较之前，先将对象转换成相似的类型。后来，有人提出了这种转换到底是否合理的质疑。最后，ECMAScript 的解决方案就是提供两组操作符：相等和不相等——先转换再比较，全等和不全等——仅比较而不转换。

## 1.相等和不相等

ECMAScript 中的相等操作符由两个等于号（ == ）表示，如果两个操作数相等，则返回 true 。而不相等操作符由叹号后跟等于号（ != ）表示，如果两个操作数不相等，则返回 true 。这两个操作符都会先转换操作数（通常称为强制转型），然后再比较它们的相等性。

在转换不同的数据类型时，相等和不相等操作符遵循下列基本规则：
  如果有一个操作数是布尔值，则在比较相等性之前先将其转换为数值—— false 转换为 0，而true 转换为 1；
  如果一个操作数是字符串，另一个操作数是数值，在比较相等性之前先将字符串转换为数值；
  如果一个操作数是对象，另一个操作数不是，则调用对象的 valueOf() 方法，用得到的基本类型值按照前面的规则进行比较；这两个操作符在进行比较时则要遵循下列规则。
 null 和 undefined 是相等的。
  要比较相等性之前，不能将 null 和 undefined 转换成其他任何值。
  如果有一个操作数是 NaN ，则相等操作符返回 false ，而不相等操作符返回 true 。重要提示：即使两个操作数都是 NaN ，相等操作符也返回 false ；因为按照规则， NaN 不等于 NaN 。
  如果两个操作数都是对象，则比较它们是不是同一个对象。如果两个操作数都指向同一个对象，则相等操作符返回 true ；否则，返回 false 。

```javascript
null == undefined	//true
NaN == NaN	//false
NaN != NaN	//true
true == 1	//true
false == 0	//true
```

### 2.全等和不全等

除了在比较之前不转换操作数之外，全等和不全等操作符与相等和不相等操作符没有什么区别。全等操作符由 3 个等于号（ === ）表示，它只在两个操作数未经转换就相等的情况下返回 true ，如下面的例子所示：
```javascript
var result1 = ("55" == 55); 
//true，因为转换后相等
var result2 = ("55" === 55); 
//false，因为不同的数据类型不相等
```

### 条件操作符

​	条件操作符应该算是 ECMAScript 中最灵活的一种操作符了，而且它遵循与 Java 中的条件操作符相同的语法形式，如下面的例子所示：
`variable = boolean_expression ? true_value : false_value;` 
​	本质上，这行代码的含义就是基于对 boolean_expression 求值的结果，决定给变量 variable赋什么值。如果求值结果为 true ，则给变量 variable 赋 true_value 值；如果求值结果为 false ，则给变量 variable 赋 false_value 值。再看一个例子：
`var max = (num1 > num2) ? num1 : num2;` 
在这个例子中， max 中将会保存一个最大的值。这个表达式的意思是：如果 num1 大于 num2 （关系表达式返回 true ），则将 num1 的值赋给 max ；如果 num1 小于或等于 num2 （关系表达式返回 false ），则将 num2 的值赋给 max 。

### 赋值操作符

简单的赋值操作符由等于号（ = ）表示，其作用就是把右侧的值赋给左侧的变量，如下面的例子所示：
`var num = 10;` 
如果在等于号（ = ）前面再添加乘性操作符、加性操作符或位操作符，就可以完成复合赋值操作。
这种复合赋值操作相当于是对下面常规表达式的简写形式：
```javascript
var num = 10;
num = num + 10;
```
其中的第二行代码可以用一个复合赋值来代替：
```javascript
var num = 10;
num += 10;
```

设计这些操作符的主要目的就是简化赋值操作。使用它们不会带来任何性能的提升。

### 逗号操作符

使用逗号操作符可以在一条语句中执行多个操作，如下面的例子所示：
`var num1=1, num2=2, num3=3;` 
逗号操作符多用于声明多个变量；但除此之外，逗号操作符还可以用于赋值。在用于赋值时，逗号操作符总会返回表达式中的最后一项，如下面的例子所示：
`var num = (5, 1, 4, 8, 0); // num 的值为 0` 
由于 0 是表达式中的最后一项，因此 num 的值就是 0。虽然逗号的这种使用方式并不常见，但这个例子可以帮我们理解逗号的这种行为。











