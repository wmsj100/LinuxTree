# TCP 协议

- TCP和UDP处于同一层--运输层，
- TCP是TCP/IP系列协议中最复杂的部分。
- TCP提供可靠的数据传输服务，是面向连接的，在使用前需要先建立连接。通信结束后还需要断开连接。
- TCP连接是点对点的，一条TCP连接只能连接俩个端点
- TCP提供可靠传输，无差错/不丢失/不重复/按顺序
- TCP提供全双工通信，允许通信双方任何时候都能发送数据，因为TCP俩端都设有发送缓存和接收缓存。
- TCP是面向字节流。不知道传输的数据的含义，仅把数据看作一连串的字节序列。

## TCP可靠传输的实现
- TCP报文段长度可变，根据手发双方的缓存状态/网络状态而调整。
- 当TCP收到TCP连接的另一端的数据，它将发送一个确认。
- 当TCP发出一个段后，它启动一个定时器，等待目的端确认收到这个报文，如果不能及时收到就超时重发
- TCP将保持它首部和数据的校验和，如果通过校验和发现报文有差错，这个报文段将被丢弃，等待超市重发。
- TCP将数据按字节排序，报文段中有序号，以确保顺序的正确性。
- TCP还能提供流量的控制，防止较快主机致使较慢主机的缓冲区溢出。

## 超时重发
- TCP规定了，接收者收到数据报文后，需要回复一个确认报文段，以告知发送者数据已经收到，而发送者如果一段时间内没有收到确认报文段，便重复发送。

## 连续ARQ协议
- 超时重传机制很费时间，每发送一个数据都需要确认。
- 在实际引用中的确不是这样的，真实情况是，采用了流水传输：
	- 发送法可以连续发送多个报文段，连续发送的数据长度叫窗口，而不是每发完一段就停下来等待确认。
	- 接收方不必对收到的每个报文都做回复，而是采用累积确认的方式，接收者等待收到多个来连续的报文段后，只确认回复最后一个报文段，表示之前的数据已经收到。
- 这样传输效率就得到了提升。
