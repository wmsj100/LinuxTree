---
title: 系统维护
date: 2020-03-14 08:07:28
modify: 
tags: [Notes]
categories: Linux
author: wmsj100
email: wmsj100@hotmail.com
---

# 系统维护

## 概要

- 正常用于维护系统的操作流程

## 维护流程

- 检查错误
	- `systemctl --failed` 检查systemd服务是否又失败
	- `journalctl -p 3 -xb` 查看/var/log日志文件中是否有错误
- 备份
	- 配置文件备份
		- 在编辑任何配置文件前,先保存备份
		- `ectkeeper`可以把/etc纳入版本控制系统
	- 安装的软件包
		- 维护一个所有安装软件包的列表,这样在不得已进行系统重装时,可以快速恢复到初始环境
	- Pacman数据库
	- LUKS headers
	- 系统和用户数据
- 更新系统
	- 升级前准备
	- 避免某些Pacman命令
	- 不支持部分升级
	- 注意更新时候的提醒
	- 处理配置文件更新
	- 回退有问题的更新
	- 检查孤立和未使用软件包
	- 选择开源驱动
	- 谨慎使用非官方或测试不足的软件包
	- 更新镜像列表
- 清理文件系统
	- `/var/cache/pacman/pkg/`删除不需要的.pkg可以减少空间占用
	- 删除不再需要的软件包减少空间占用和维护难度
	- 旧配置文件
	- 破损的软链接: 系统可能存在老的/损坏的软链接,应该删除它们
- 技巧
	- 使用经过验证的软件包
	- 安装内核的长期支持版本
		- linux-lts是arch官方提供的Linux kernel的长期支持版本,内核上游开发者针对此版本提供了长期支持


## 参考

