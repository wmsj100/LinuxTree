---
title: javascript基础知识
date: 2016-06-07
tags: [JavaScript]
categories: Dynamic
---

- 使用var重复声明一个已经存在的变量是无效的。
- 变量的声明和赋值是分开的俩个步骤；
- 未赋值的变量默认为`undefined`;
- JS引擎的工作方式是先获取所有未声明的变量，然后再一行一行的运行。
- 标识符是用与识别具体对象的一个名称。最常见的标识符就是变量名，以及函数名。
- 标识符的第一个字符可以是--字母、$ / _ .后面的字符还可以有数字。
- 中文是合法的标识符，可以用作变量名。var 你好=1
- 源码中被JS引擎忽略的部分就是注释。

JS是阻塞加载的，不管JS脚本是以何种方式加载的，内嵌到`html`，外部文件加载、动态创建的`JS`脚本，都一样，因为浏览器无法预知`JS`是否会修改`DOM`，所以此时页面解析和用户交互是完全阻塞的。

浏览器在遇到`body`标签之前不会渲染页面的任何部分。

把脚本放置到页面顶端将造成可以察觉的延迟。

`script`标签下载外部资源时候会阻塞其它资源的下载，例如图片。将脚本放置到页面的底部尽量减少对其它资源下载的阻塞。

**“Yahoo! 优越性能小组”关于JavaScript 的第一条定律：将脚本放在底部。**

每个`script`会阻塞页面的解析过程，限制`script`总数可以改善性能，这个规则对于内联脚本和外联脚本同样适用。每当页面碰到一个`script`标签时候，紧接着会有一段时间的代码执行，最小化这些时间可以改善性能。

每个`HTTP`请求都会产生额外的性能负担，下载一个100KB的文件所需要的时间要少于下载4个`50KB`文件的时间。所以将所有的`JS`脚本打包成一个文件可以提高性能。

即便是异步的加载`JS`脚本，也只是`JS`脚本在下载时候不会阻塞页面，但是执行过程依然会阻塞页面，不同的是`defer`将这种阻塞放到了页面全部加载完成之后，而`async`是一旦`JS`脚本下载完成之后就立即执行。![](http://upload-images.jianshu.io/upload_images/1606281-7f813cc953f15246.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

一个带有`defer`标签的脚本可以被放置到任何位置。对应的JS文件将在`script`标签被解析时候启动下载，但是不会阻塞页面，代码也不会执行，直到`DOM`被加载完成（在onload事件句柄被调用之前）。

**`defer`对于页面内联的JS脚本是无效的。**

通过动态添加`script`，可以放置到`head`内部，而且脚本的下载和运行都不会阻塞页面。
使用动态`script`节点下载脚本时，返回的代码通常立即执行，当脚本是自运行时，通常是没有问题的，但如果脚本只包含供页面其它脚本调用的接口时候就会出现问题。这时候需要跟踪脚本下载，并准备妥善情况。

---

