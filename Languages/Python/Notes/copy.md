---
title: copy
date: 2020-02-05 15:36:50
modify: 
tags: [Notes]
categories: Python
author: wmsj100
email: wmsj100@hotmail.com
---

# copy

## 概要

- 介绍关于浅拷贝和深拷贝的概念

## 浅拷贝

- 浅拷贝: 指的是重新分配一块内存，创建一个新的对象，但里面的元素是原对象中各个子对象的引用。
- 对于浅拷贝，如果原对象的元素不可变，无所谓，如果原对象的元素有可变元素(list/dict/set)，浅拷贝通常会出现问题。

### 浅拷贝实现

- 使用数据类型本身的构造器
```python
a={'name': 'wmsj100'}
b = dict(a)
a == b # True
a is b # False
```
- 对于list，可以通过`[:]`来实现浅拷贝
- 通过`copy.copy`模块的方法来实现任何数据结构的浅拷贝。
- 对于元组，使用tuple()或切片操作法`:`不会创建一份浅拷贝，相反它会返回一个指向相同元组的引用。

## 深拷贝

- 深拷贝: 指的是重新分配一块内存，创建一个新的对象，并且将原对象中的元素，以递归的形式，通过创建新的子对象拷贝到新对象中。
- 新对象和原对象没有任何关联
- `copy.deepcopy()` 实现对任何对象的深拷贝

## 深拷贝的问题

- 深拷贝也会带来一系列问题，
- 如果被拷贝对象中存在指向自身的引用，那么程序很容易陷入无限循环中。
```python
a = [1]
a.append(a)
b = copy.deepcopy(a)
```

## 参考

