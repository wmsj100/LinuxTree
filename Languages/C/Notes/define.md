---
title: 宏
date: 2019-04-21 12:55:00	
modify: 
tag: [define,basic]
categories: C
author: wmsj100
mail: wmsj100@hotmail.com
---

# 宏

## 概述
- 宏是在预处理阶段进行字符串替换的操作
- `define`使用该关键字定义宏
- 宏定义要在文件头部定义
- 宏的值要使用括号包裹
- 宏替换只是简单的字符串替换，不会进行变量运算
- 宏定义不是说明或语句，在末尾不需要添加`;`，如果添加，会连;一起替换
- #undef 终止宏作用域
- 如果宏名称被引号包裹，则不进行宏替换
- 宏定义允许宏嵌套
- 宏名称用大写字母定义

## 参数
- 宏允许带参数
- 参数必须也用括号包裹
- 宏参数定义时候没有分配内存，所以参数不需要指明数据类型
- `#define M(n) ((n)*(n)+3*(n))`

## 预定义宏
- `__DATE__`: 返回日期 %s
- `__TIME__`: 返回时间 %s
- `__FILE__`: 返回文件名 %s
- `__LINE__`: 返回行号 %d

## 预处理指令
- #include 包含一个源代码文件
- #define 定义宏
- #undef 取消已定义的宏
- #if 如果条件为真，编译下面代码
- #ifdef 如果宏已经定义
- #ifndef 如果宏没有定义
- #elif 
- #endif 结束if

# 范例
- `define M (n*n+3*n)` 

## 参考
- []()
