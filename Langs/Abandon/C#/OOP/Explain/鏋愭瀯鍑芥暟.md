---
title: 析构函数.md
date: 2016-08-16
tags: [C#]
categories: Language
---

不用的对象要及时删除以释放内存空间，在传统的面向对象设计中使用析构函数来删除对象。

析构函数与类同名，只是要在函数名前面添加符合`~`，它不能添加任何参数，也没有返回值。

析构函数用来销毁对象释放内存空间，而且一般是由编译器自动创建一个默认的析构函数，没必要自己编写。

当对象即将离开作用域时，系统自动调用对象的析构函数，释放对象占用的空间。

然而在大型的程序中，有些对象虽然不再使用，但是离作用域结束还有相当长的时间，在这器期间，对象仍然占用着内存，浪费资源。

在`C++`中，程序员需要显示的调用`delete`语句删除垃圾对象，如果程序员忘记了及时删除，这些垃圾对象可能占用大量的内存空间，造成‘内存泄漏’；

为了解决这个痼疾，C#专门设计了一套回收资源的机制——垃圾回收器。当垃圾回收
器确定某个对象已经无用时，就会自动删除该对象，释放内存空间。在这套机制下，内存
自动回收，无需人工干预，解决了常常困扰 C++程序员的“内存泄露”问题。总之在 C#
中删除对象的工作是由垃圾回收器负责完成，析构函数通常用来释放对象使用的非托管资
源。
需要指出的是垃圾回收器的运行时间具有不确定性，我们无法预计垃圾回收器什么时
候运行，因此也无法预测什么时候会删除无用对象，有可能立即删除，也可能要过一段时
间才删除。我们可以通过调用 System.GC.Collect()方法强迫垃圾回收器运行（会对性能产
生一定影响），但即使调用了该方法，我们也无法预知垃圾回收器具体在何时运行。

总之就是，析构函数一般不用自己手写。