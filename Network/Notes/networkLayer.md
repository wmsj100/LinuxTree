---
title: 网络层
date: 2018-03-25 17:38:10 Sun
modify: 2018-03-25 17:38:10 Sun
tag: [net]
categories: Linux
author: wmsj100
mail: wmsj100@hotmail.com
---

# 网络层

## 基本概念
- 网络层协议提供的是尽力而为的服务，网际协议IP是TCP/IP体系中俩个最主要的协议之一。
- 与IP协议配套使用的还有三个协议：
	- 地址解析协议ARP Address Resolution Protocol 位于IP协议的最底层
	- 网际控制报文协议ICMP Internet Control Message Protocol 位于顶层
	- 网际组管理协议 IGMP Internet Group Management Protocol 位于顶层
- 中间设备： 将网路互相连接起来需要使用一些中间设备，
	- 转发器： 物理层使用的中间设备
	- 网桥/桥接器：数据链路层使用的中间设备
	- 路由器： 网络层使用的中间设备
	- 网关：在网络层以上使用的中间设备
	- 当中间设备是转发器或网桥时，仅仅是把一个网络扩大了，从网络层的角度看，这仍然是一个网络，一般不称为网络互联；
	- 网关由于比较复杂，目前使用的较少
	- 通常讨论网络互联时就是指用路由器进行网络互联和路由选择

## IP
- 整个互联网就是一个单一的，抽象的网络。
- IP地址就是给互联网上的每一台主机（或路由器）的每一个接口分配一个在全世界范围内唯一的32位的标识符。
- 一个IP地址在整个互联网范围内是唯一的
- IP地址的编址共经过了三个历史阶段：
	- 分类的IP地址： 这是最基本的编址方式
	- 子网的划分： 对基本编址方式进行改进
	- 构成超网： 这是比较新的无分类编址方法，93年提出后很快得到推广

## 分类的IP地址
- 将IP地址划分为若干个固定类，每一类地址都是俩个固定长度的字段组成，第一个字段是网络号，第二个字段是主机号
- 网络号：在整个互联网范围内必须是唯一的，
- 主机号：标志主机或路由器，在它前面的网络号所指明的网络范围内必须是唯一的。
- 当某个单位申请到一个IP地址时，实际上获得了具有同样网络号的一块地址，
- 由于近年来已经广泛使用无分类IP地址进行路由选择，A/B/C类地址区分已经成为了历史。

## IP地址特点
1. 每一个IP都由网络号和主机号组成
	- IP地址管理机构在分配IP地址时只分配网络号，而剩下的主机号则由得到该网络号的单位自行分配
	- 路由器仅根据目的主机所连接的网络号来转发分组，不考虑目的主机的主机号，这样可以使路由表的项目数大幅减少，从而减少了路由表占用的存储空间和查找路由表的时间
2. IP地址是标志一台主机（或路由器）和一条链路的接口
	- 当一台主机同时连接到俩个网络上时这台主机就必须同时具有俩个相应的IP地址，其网络号必须是不同的。这种主机称为多归属主机；
	- 由于一个路由器至少要连接到俩个网络，因此一个路由器至少应当有俩个不同的IP地址
3. 按照互联网观点，一个网络是指具有相同网络号的主机的集合，
	- 因此用转发器或网桥连接起来的若干个局域网仍然是一个网络，因为这些局域网都具有同样的网络号。
	- 具有不同网络号的局域网必须使用路由器进行互联
4. 在IP地址中，所有分配到网络号的网络（不管是范围很小的局域网还是范围很广的广域网）都是平等的，所谓平等是指互联网同等对待每一个IP地址
	- 在同一个网络上的主机或路由器的IP地址中的网络号必须是一样的
	- 用网桥互连的网端仍然是一个局域网，只能由一个网络号。
	- 路由器总是具有俩个或俩个以上的IP地址。即路由器的每一个接口都有一个不同的网络号IP地址。
	- 当俩个路由器互相直连时，在连线俩端的接口处可以分配也可以部分配IP地址。
		- 如果分配了IP地址，则这一段连续就构成了一种只包含一段线路的特殊网络，称为网络时因为有IP地址
		- 但为了节省IP地址，对于这样仅由一段连线构成的特殊网络现在常常部分配IP地址，把这样特殊的网络叫做无编号网络或无名网络。
5. 
