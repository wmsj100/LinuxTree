---
title: Web页面渲染原理
date: 2016-4-4 16:53:10
tags: [浏览器,Web]
categories: Web
---

1. 安装了`wamp`，这是`php`页面截图：
   <!-- more --> 
   ![](/file/img/tool/April/0404/001.png)

2. 新浪云已欠费，这是阿里云空间，也支持`php`,制作了一个表单验证；

   [表单验证](http://www.erheizi.com/form.php)

3. 简单描述下`web` 服务器、`PHP`、数据库、浏览器是如何实现动态网站的?

   1. 首先浏览器会解析用户输入的`URL`地址为对应的`IP`地址；
   2. 如果通过解析出来的IP地址无法找到服务器，浏览器就会返回`502`信息；
   3. 如果通过IP地址查询到服务器，浏览器就会通过`TCP`协议去连接上面解析出来的IP地址的服务器，连接的端口默认为`80`；
   4. 服务器解析用户的`URL`请求并和自己的目录进行比对，如果无法再自己的目录中找到文件，服务器就返回`404`页面，表示用户请求的数据不存在；
   5. 如果服务器在自己的目录中找到了文件，但是因为服务器自己无法解析`PHP`动态文件，所以就会解析出来的文件路径转发给`PHP`服务器；
   6. `PHP`服务器通过`SQL`语句操作`SQL`数据库服务器上面的数据，并把得到的结果转换为静态的`HTML`页面，并且把页面传递给服务器；
   7. 服务器接收到`HTML`内容然后会打包数据，通过`TCP`协议传递给浏览器；
   8. 浏览器接收到数据开始渲染页面，然后把内容呈现给用户。

4. 常见的 WEB 服务器有哪些？

   1. 最常见的莫过于骨灰级的`apache`,以兼容性和稳定性著称；
   2. 还有后起之秀的`Nginx`是俄罗斯程序员开发，以数据处理速度（可以甩apache一条街，这是理论速度）和极大的并发访问能力著称，但是稳定性还有待时间的考证；
   3. 最后就是微软的`IIS`,因为有凭借桌面系统的份额优势在务器领域也风生水起，而且最近微软开始拥抱linux，开源了自己很多重量级的产品包括`.NET`核心，`Visual Studio Code`，甚至还有`Edge`的源代码，而且微软的云服务器也是极为强大的，亚马逊的最大竞争对手。

5. 打开浏览器，在地址栏输入 `http://jirengu.com` 页面展现了饥人谷官网的信息，整个过程发生了什么？（饥人谷官网后台语言 php,web服务器 nginx，数据库 mysql）

   1. 首先浏览器会从缓存中查找是否有对应`http://jirengu.com/`域名的IP地址，如果没有就向上探寻，系统缓存、路由缓存、服务器缓存，最后一直到根服务器进行DNS解析，得到对应的IP地址`121.40.201.213`；

   2. 然后浏览器会对这个IP地址进行查找，如果没有查找到对应的服务器，那么就返回`502`页面；

   3. 如果查找到了对应IP地址的服务器，那么浏览器就会和服务器进行`三次握手`,等待握手完成就会建立`TCP`连接进行文件传输。其中包括请求数据类型`text/html,`用户浏览器本地`cookie`,用户要访问的地址`jirengu.com`还有包括浏览器的内核版本信息，和用户的请求方式为`get`如下图：

      ![](/file/img/tool/April/0404/006.png)

      ![](/file/img/tool/April/0404/002.png)

   4. 服务器``Nginx`接收到浏览器通过`TCP/IP`协议与服务器建立连接，发送的数据之后就开始解析数据，查找自己自己的目录内部时候有没有对应的文件，因为没有输入文件名，所以服务器默认会搜索目录下面的名为`index`的文件，但是找到的是PHP格式的文本，`nginx`自己并不能解析动态语言格式，所以就把找到的`http://jirengu.com/index.php`路径交给PHP服务器去解析，PHP服务器解析数据时候发现需要到数据库中获取数据，此时PHP就通过SQL语言来操作数据库服务器`mysql`来获得相应的数据。

   5. 然后PHP服务器就把找到的数据解析成静态页面交给服务器`nginx`;

   6. 服务器`nginx`把获取到的全部数据打包再通过`HTTP`协议传回浏览器；

      ![](/file/img/tool/April/0404/009.png)

   7. 浏览器根据`nginx`发回的信息开始解析页面，知道页面是`utf-8`编码格式，有多少CSS，js，然后开始下载并解析渲染页面，然后用户就看到了请求的饥人谷页面。

      ![](/file/img/tool/April/0404/008.png)

      ![](/file/img/tool/April/0404/007.png)


   ​

