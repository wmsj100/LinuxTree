---
title: NoSQL
date: 2020-04-10 11:09:13
modify: 
tags: [Notes]
categories: Distribute
author: wmsj100
email: wmsj100@hotmail.com
---

# NoSQL

## 概要

- NoSQL: Not Only SQL 不仅仅是SQL
- 在现代的计算机系统上每天都会产生庞大的数据量，这些数据有很大一部分是由关系数据库管理系统来处理。
- 关系模型是非常适合于客户服务去编程，远远超出预期的利益，今天它是结构化数据存储在网络和商务应用的主导技术。
- NoSQL是一项全新的数据库革命性运动，提倡运用非关系型的数据存储

## 关系型数据库遵循ACID规则

### A(Atomicity)原子性

- 原子性很容易理解，也就是说事务里的所有操作要么全部做完，要么都不做，事务成功的条件是事务里的所有操作都成功，只要有一个操作失败，整个事务就失败，需要回滚。
- 比如银行转账，从A账户转100到B账户，分俩个步骤，从A账户取出100，给B账户存入100，俩个事务都必须一起完成

### C(Consistency)一致性

- 一致性也比较容易理解，也就是说数据库需要一直处于一致的状态，事务的运行不会改变数据库原本的一致性约束。
- 现有完整性约束a+b=10,如果一个事务改变了a，那么必须得改变b，使得事务结束后依然满足a+b=10,否则事务失败。

### I(Isolation)独立性

- 所谓的独立性是指并发的事务之间不会互相影响，如果一个事务要访问的数据正被另一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。

### D(Durability)持久性

- 持久性是指一旦事务提交后，它所做的修改将会永久的保存在数据库上，即使出现宕机也不会丢失

## 分布式系统

- 分布式系统是由多台计算机和通信的软件组件通过计算机网络连接(本地网络或广域网)组成。
- 分布式系统是建立在网络之上的软件系统。正是因为软件的特性，所以分布式系统具有高度的内聚性和透明性。
- 因此网络和分布式系统之间的区别更多的在于高层软件(特别是操作系统)，而不是硬件。

## 分布式计算的优点

- 可靠性:(容错): 分布式计算系统的一个重要优点是可靠性，一台服务器的奔溃并不影响到其余服务器。
- 可扩展性: 在分布式计算系统可以根据需要增加更多的机器
- 资源共享: 共享数据是必不可少的应用，如银行，预订系统
- 灵活性: 由于该系统是非常灵活的，它很容易安装，实施和调试新的服务。
- 更快的速度: 分布式计算可以有多台计算机的算力，使得它比其他系统更快的处理速度。
- 开放系统: 由于他是开发的系统，本地或者远程都可以访问到该服务
- 更高的性能: 相较于集中式计算机网络集群可以提供更高的性能(及更好的性价比).

## 分布式系统的缺点

- 故障排查
- 软件: 更少的软件支持是分布式系统主要缺点
- 网络: 网络基础设施的问题，包括传输问题，高负载，信息丢失
- 安全性: 开发系统的特性让分布式系统存在着数据安全性和共享的风险

## NoSQL

- NoSQL用于超大规模数据的存储。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展
- 用户的个人信息，社交网络，地理位置，用户生成的数据和用户操作日志已经成倍的增加。如果要对这些数据挖掘，那么SQL数据库已经不适合这些应用了，NoSQL数据库的发展也却能很好的处理这些大的数据。

## NoSQL优点/缺点

- 优点：
	- 高可扩展性
	- 分布式计算
	- 低成本
	- 架构的灵活性，半结构化数据
	- 没有复杂的关系
- 缺点:
	- 没有标准化
	- 有限的查询功能
	- 最终一致是不直观的程序

## BASE

- BASE: Basically Available Soft-state Eventually Consistent 基本可用，软状态/柔性事务/无连接 最终一致性
- CAP理论的核心是: 一个分布式系统不可能同时很好的满足一致性、可用性和分区容错三个需求，最多只能同时较好的满足俩个。
- BASE是NoSQL数据库通常对可用性及一致性的弱要求原则

## NoSQL数据库分类

- 列存储: 按列存储数据，最大的特点是方便存储结构化和半结构化数据，方便做数据压缩，对针对某一列或者某几列的查询有非常大的IO优势。
	- Hbase
	- Cassandra 
	- Hypertable
- 文档存储: 文档存储一般用类似json的格式存储，存储的内容是文档型的。这样也就有机会对某些字段建立索引，实现关系数据库的某些功能。
	- MongoDB
	- CouchDB
- key-value存储: 可以通过key快速查询到其value。一般来说，存储不管value的格式，照单全收
	- Tokyo Cabinet/Tyrant
	- Berkeley DB
	- MemcacheDB
	- Redis
- 图存储: 图形关系的最佳存储。使用传统关系数据库来解决的话性能低下，而且设计使用不方便
	- Neo4J
	- FlockDB
- 对象存储: 通过类似面向对象语言的语法操作数据库，通过对象的方式存取数据。
	- db4o
	- Versant
- xml数据库: 高效的存储XML数据，并支持XML的内部查询语法，比如XQuery,Xpath.

## 参考

- [文档参考](https://www.mongodb.org.cn/tutorial/2.html)
