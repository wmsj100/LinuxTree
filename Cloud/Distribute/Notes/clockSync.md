---
title: 时钟同步
date: 2020-04-10 11:26:25
modify: 
tags: [Notes]
categories: Distribute
author: wmsj100
email: wmsj100@hotmail.com
---

# 时钟同步

## 概要

- 我们通常所说的时间是物理时间，在计算机系统中，时间更多的应用场景是确认俩个事件发生的先后顺序。
- 在分布式系统中，俩台计算机各自计算自己的时间，即使我们在初始配置时将俩台计算机的时间调整为一致，由于受到物理环境的影响(气温、压强、温度、晶体的寿命等)，会导致晶振的频率产生差异，从而使得俩台计算机仍然会出现时钟的差异。
- 时钟差异的产生从简单来理解，当我们分析一个问题时，从日志中无法分析出俩台设备事件发生的先后顺序，进而对我们的分析产生干扰。
- 如果时钟差异在多台设备之间是无法避免的，那么如何去区分多台设备之间事件发生的先后顺序，从而协调各设备完成分布式任务。
- 所以如何保障系统的物理时钟尽可能的一致，是分布式系统需要解决的问题，如何保证多台设备之间事件发生的先后顺序，也是分布式系统需要去解决的问题。
- 这里需要引入俩个概念，物理时钟和逻辑时钟。
- 所谓物理时钟是指从系统时钟里获取一个时间戳，而所谓的逻辑时钟是指一个自定义的自增序列数值。

## 物理时钟

- NTP: Network Time Protocol 网络时间协议
- SNTP: simple network time protocol 简单网络时间协议
- PTP: Presision Time Protocol 精准时间协议

## 参考

- [时钟](http://www.distorage.com/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E7%B3%BB%E5%88%97-%E6%97%B6%E9%92%9F%E5%90%8C%E6%AD%A5/)
