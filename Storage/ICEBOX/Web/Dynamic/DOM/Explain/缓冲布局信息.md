---
title: 缓冲布局信息
date: 2016-06-11
tags: [DOM]
categories: Dynamic
---

浏览器通过队列化修改和批量运行的方法，尽量减少重排版次数。当查询布局信息，如偏移量、滚动条位置，或风格属性时，浏览器刷新队列并执行所有操作，以返回所有的数值，最好是减少对布局信息的查询次数，查询时将它赋值给局部变量，并用局部变量参与运算。

对于敏感的内容，比如容易导致重绘的属性`offsetLeft`最好只是最开始提取一次，把这个值保持到局部变量中进行调用和计算。

对于全局变量的调用，最好在函数内部把全局变量保存为局部变量。

一个函数只做一件事情，

~~对于函数封装，需要分情况，如果不是立即调用的函数，那么就封装到对象内部，如果是立即调用的函数，那么可以封装到立即调用的闭包中。~~

上面的说法是错误的，现在更新如下：
只要是函数封装，尽可能封装到立即执行函数中，并且把值赋值给一个对象，这样的好处是隐藏了函数的私有变量，而且函数的方法都绑定到了对象的属性上面，不会污染全局变量。

下面是一个div模块的屏幕移动过程

[div屏幕移动动画](http://jsbin.com/recaliz/2/edit?html,js,output)